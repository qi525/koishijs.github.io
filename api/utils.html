<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常用工具 (Utils) | Koishi</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/koishi.png">
    <meta name="description" content="">
    <meta name="theme-color" content="#5546a3">
    
    <link rel="preload" href="/assets/css/0.styles.8731e940.css" as="style"><link rel="preload" href="/assets/js/app.cd7094d9.js" as="script"><link rel="preload" href="/assets/js/2.9ff48064.js" as="script"><link rel="preload" href="/assets/js/9.4a353ef9.js" as="script"><link rel="preload" href="/assets/js/27.a7d44d0f.js" as="script"><link rel="preload" href="/assets/js/5.1ec24116.js" as="script"><link rel="prefetch" href="/assets/js/10.8d0d4c51.js"><link rel="prefetch" href="/assets/js/11.9c87e860.js"><link rel="prefetch" href="/assets/js/12.f46b7af2.js"><link rel="prefetch" href="/assets/js/13.d0502719.js"><link rel="prefetch" href="/assets/js/14.9171b1b4.js"><link rel="prefetch" href="/assets/js/15.d5c9f0e0.js"><link rel="prefetch" href="/assets/js/16.65417a98.js"><link rel="prefetch" href="/assets/js/17.9116f370.js"><link rel="prefetch" href="/assets/js/18.baac99cb.js"><link rel="prefetch" href="/assets/js/19.678723f8.js"><link rel="prefetch" href="/assets/js/20.a5228916.js"><link rel="prefetch" href="/assets/js/21.53cda660.js"><link rel="prefetch" href="/assets/js/22.9e9100e8.js"><link rel="prefetch" href="/assets/js/23.25310c0f.js"><link rel="prefetch" href="/assets/js/24.087d1361.js"><link rel="prefetch" href="/assets/js/25.2f79e408.js"><link rel="prefetch" href="/assets/js/26.9b79ab98.js"><link rel="prefetch" href="/assets/js/28.21f31302.js"><link rel="prefetch" href="/assets/js/29.d5e15f81.js"><link rel="prefetch" href="/assets/js/3.6fe66a2c.js"><link rel="prefetch" href="/assets/js/30.251e6baa.js"><link rel="prefetch" href="/assets/js/31.334484c7.js"><link rel="prefetch" href="/assets/js/32.8f981c6d.js"><link rel="prefetch" href="/assets/js/33.6d310169.js"><link rel="prefetch" href="/assets/js/34.304a8fcd.js"><link rel="prefetch" href="/assets/js/35.b2c1f496.js"><link rel="prefetch" href="/assets/js/36.4b1ae0e5.js"><link rel="prefetch" href="/assets/js/37.8fb6b29b.js"><link rel="prefetch" href="/assets/js/38.36d1e749.js"><link rel="prefetch" href="/assets/js/39.eee30141.js"><link rel="prefetch" href="/assets/js/4.8d41e874.js"><link rel="prefetch" href="/assets/js/40.1b3311ac.js"><link rel="prefetch" href="/assets/js/41.6e54118f.js"><link rel="prefetch" href="/assets/js/42.852c32dd.js"><link rel="prefetch" href="/assets/js/43.bd613188.js"><link rel="prefetch" href="/assets/js/44.e92ac662.js"><link rel="prefetch" href="/assets/js/45.26164691.js"><link rel="prefetch" href="/assets/js/46.a9d18d74.js"><link rel="prefetch" href="/assets/js/47.da16f5d4.js"><link rel="prefetch" href="/assets/js/48.2c33e213.js"><link rel="prefetch" href="/assets/js/49.dd45a410.js"><link rel="prefetch" href="/assets/js/50.ca2af0a0.js"><link rel="prefetch" href="/assets/js/51.3be595bd.js"><link rel="prefetch" href="/assets/js/52.3737ab79.js"><link rel="prefetch" href="/assets/js/53.79425dd4.js"><link rel="prefetch" href="/assets/js/54.d7411943.js"><link rel="prefetch" href="/assets/js/55.0ffc3d14.js"><link rel="prefetch" href="/assets/js/56.86b19261.js"><link rel="prefetch" href="/assets/js/57.9a8409f6.js"><link rel="prefetch" href="/assets/js/58.0b855ac4.js"><link rel="prefetch" href="/assets/js/59.7294007f.js"><link rel="prefetch" href="/assets/js/6.cc3a06ff.js"><link rel="prefetch" href="/assets/js/60.8db2dc8c.js"><link rel="prefetch" href="/assets/js/61.a0f9d125.js"><link rel="prefetch" href="/assets/js/62.7e117980.js"><link rel="prefetch" href="/assets/js/63.055c882a.js"><link rel="prefetch" href="/assets/js/64.72229f83.js"><link rel="prefetch" href="/assets/js/65.2ee92b65.js"><link rel="prefetch" href="/assets/js/66.65269c36.js"><link rel="prefetch" href="/assets/js/67.0dab4039.js"><link rel="prefetch" href="/assets/js/68.6e06140c.js"><link rel="prefetch" href="/assets/js/69.393bca84.js"><link rel="prefetch" href="/assets/js/7.ea3c96e0.js"><link rel="prefetch" href="/assets/js/70.19040ac4.js"><link rel="prefetch" href="/assets/js/71.9e258746.js"><link rel="prefetch" href="/assets/js/8.c9d84004.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8731e940.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/koishi.png" alt="Koishi" class="logo"> <span class="site-name can-hide">Koishi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/intro/starter.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">
  官方插件
</a></div><div class="nav-item"><a href="https://github.com/koishijs/koishi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/intro/starter.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">
  官方插件
</a></div><div class="nav-item"><a href="https://github.com/koishijs/koishi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/api/" aria-current="page" class="sidebar-link">总览</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>核心 API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/context.html" class="sidebar-link">上下文 (Context)</a></li><li><a href="/api/app.html" class="sidebar-link">应用 (App)</a></li><li><a href="/api/bot.html" class="sidebar-link">机器人 (Bot)</a></li><li><a href="/api/events.html" class="sidebar-link">事件 (Events)</a></li><li><a href="/api/session.html" class="sidebar-link">会话 (Session)</a></li><li><a href="/api/command.html" class="sidebar-link">指令 (Command)</a></li><li><a href="/api/database.html" class="sidebar-link">数据库 (Database)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>其他官方包</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/utils.html" aria-current="page" class="active sidebar-link">常用工具 (Utils)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#观察者对象" class="sidebar-link">观察者对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#observe" class="sidebar-link">observe()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#observed-diff" class="sidebar-link">observed._diff</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#observed-merge" class="sidebar-link">observed._merge()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#observed-update" class="sidebar-link">observed._update()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#字符串操作" class="sidebar-link">字符串操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#simplify" class="sidebar-link">simplify()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#traditionalize" class="sidebar-link">traditionalize()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#capitalize" class="sidebar-link">capitalize()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#camelcase" class="sidebar-link">camelCase()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#paramcase" class="sidebar-link">paramCase()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#snakecase" class="sidebar-link">snakeCase()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#模板操作" class="sidebar-link">模板操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#template" class="sidebar-link">template()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#template-set" class="sidebar-link">template.set()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#template-get" class="sidebar-link">template.get()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#template-format" class="sidebar-link">template.format()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#集合操作" class="sidebar-link">集合操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#contain" class="sidebar-link">contain()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#intersection" class="sidebar-link">intersection()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#difference" class="sidebar-link">difference()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#union" class="sidebar-link">union()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#日期操作" class="sidebar-link">日期操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#静态属性" class="sidebar-link">静态属性</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#time-getdatenumber" class="sidebar-link">Time.getDateNumber()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#time-fromdatenumber" class="sidebar-link">Time.fromDateNumber()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#time-parsetime" class="sidebar-link">Time.parseTime()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#time-parsedate" class="sidebar-link">Time.parseDate()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#time-formattime" class="sidebar-link">Time.formatTime()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#time-formattimeshort" class="sidebar-link">Time.formatTimeShort()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#time-formattimeinterval" class="sidebar-link">Time.formatTimeInterval()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-操作" class="sidebar-link">CQCode 操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-escape" class="sidebar-link">CQCode.escape()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-unescape" class="sidebar-link">CQCode.unescape()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-stringify" class="sidebar-link">CQCode.stringify()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-stringifyall" class="sidebar-link">CQCode.stringifyAll()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-parse" class="sidebar-link">CQCode.parse()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-parseall" class="sidebar-link">CQCode.parseAll()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#输出日志" class="sidebar-link">输出日志</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#new-logger" class="sidebar-link">new Logger()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#logger-error" class="sidebar-link">logger.error()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#logger-success" class="sidebar-link">logger.success()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#logger-warn" class="sidebar-link">logger.warn()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#logger-info" class="sidebar-link">logger.info()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#logger-debug" class="sidebar-link">logger.debug()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#随机数操作" class="sidebar-link">随机数操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#random-uuid" class="sidebar-link">Random.uuid()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#random-bool" class="sidebar-link">Random.bool()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#random-real" class="sidebar-link">Random.real()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#random-int" class="sidebar-link">Random.int()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#random-shuffle" class="sidebar-link">Random.shuffle()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#random-pick" class="sidebar-link">Random.pick()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#random-multipick" class="sidebar-link">Random.multiPick()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#random-weightedpick" class="sidebar-link">Random.weightedPick()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#其他工具函数" class="sidebar-link">其他工具函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#noop" class="sidebar-link">noop()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#sleep" class="sidebar-link">sleep()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#isinteger" class="sidebar-link">isInteger()</a></li></ul></li></ul></li><li><a href="/api/test-utils.html" class="sidebar-link">测试工具 (Test Utils)</a></li><li><a href="/api/adapter/onebot.html" class="sidebar-link">平台：OneBot</a></li><li><a href="/api/adapter/kaiheila.html" class="sidebar-link">平台：Kaiheila</a></li><li><a href="/api/database/mongo.html" class="sidebar-link">数据库：Mongo</a></li><li><a href="/api/database/mysql.html" class="sidebar-link">数据库：MySQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>更新与迁移</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/changelog.html" class="sidebar-link">v3 更新日志</a></li><li><a href="/api/migration.html" class="sidebar-link">从旧版本迁移</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="常用工具"><a href="#常用工具" class="header-anchor">#</a> 常用工具 (Utils)</h1> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>本页显示的版本号都表示对应的 koishi-utils 版本号（而不是对应的 koishi 版本号）。</p></div> <p>包含了被 Koishi 使用的工具函数，它们由 <code>koishi-utils</code> 包提供。</p> <h2 id="观察者对象"><a href="#观察者对象" class="header-anchor">#</a> 观察者对象</h2> <h3 id="observe"><a href="#observe" class="header-anchor">#</a> observe(target, update?, label?)</h3> <p>创建一个观察者对象。目前只支持从普通对象创建（不支持 Array / Set / Map）。</p> <ul><li><strong>target:</strong> <code>T extends object</code> 要观测的对象</li> <li><strong>update:</strong> <code>(diff: Partial&lt;T&gt;) =&gt; R</code> 更新回调函数</li> <li><strong>label:</strong> <code>string</code> 对象的标签，用于标识</li> <li>返回值: <code>Observed&lt;T&gt;</code></li></ul> <h3 id="observed-diff"><a href="#observed-diff" class="header-anchor">#</a> observed._diff</h3> <p>观察者当前的对象变化。</p> <h3 id="observed-merge"><a href="#observed-merge" class="header-anchor">#</a> observed._merge(source)</h3> <p>将某些属性合并入当前观察者，不会触发 diff 更新。</p> <ul><li><strong>source:</strong> <code>object</code> 要合并的对象</li> <li>返回值: <code>this</code></li></ul> <h3 id="observed-update"><a href="#observed-update" class="header-anchor">#</a> observed._update()</h3> <p>更新观察者对象，同时清除 diff。</p> <ul><li>返回值: <code>R</code></li></ul> <h2 id="字符串操作"><a href="#字符串操作" class="header-anchor">#</a> 字符串操作</h2> <h3 id="simplify"><a href="#simplify" class="header-anchor">#</a> simplify(source)</h3> <p>繁体转简体。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>string</code> 简体文本</li></ul> <h3 id="traditionalize"><a href="#traditionalize" class="header-anchor">#</a> traditionalize(source)</h3> <p>简体转繁体。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>string</code> 繁体文本</li></ul> <h3 id="capitalize"><a href="#capitalize" class="header-anchor">#</a> capitalize(source)</h3> <p>首字母大写。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>string</code> 首字母大写后的文本</li></ul> <h3 id="camelcase"><a href="#camelcase" class="header-anchor">#</a> camelCase(source)</h3> <p>如果输入的是字符串，则将字符串转换成 camelCase；如果是数组或对象，则递归地将对象中的每个（可枚举）的键转换成 camelCase；其他情况不受影响。</p> <ul><li><strong>source:</strong> <code>any</code> 要转换的内容</li> <li>返回值: <code>any</code> 转换结果</li></ul> <h3 id="paramcase"><a href="#paramcase" class="header-anchor">#</a> paramCase(source)</h3> <p>如果输入的是字符串，则将字符串转换成 param-case；如果是数组或对象，则递归地将对象中的每个（可枚举）的键转换成 param-case；其他情况不受影响。</p> <ul><li><strong>source:</strong> <code>any</code> 要转换的内容</li> <li>返回值: <code>any</code> 转换结果</li></ul> <h3 id="snakecase"><a href="#snakecase" class="header-anchor">#</a> snakeCase(source)</h3> <p>如果输入的是字符串，则将字符串转换成 snake_case；如果是数组或对象，则递归地将对象中的每个（可枚举）的键转换成 snake_case；其他情况不受影响。</p> <ul><li><strong>source:</strong> <code>any</code> 要转换的内容</li> <li>返回值: <code>any</code> 转换结果</li></ul> <h2 id="模板操作"><a href="#模板操作" class="header-anchor">#</a> 模板操作</h2> <h3 id="template"><a href="#template" class="header-anchor">#</a> template(path, ...params)</h3> <p>根据模板路径返回插值后的字符串。如果路径不存在将会返回路径本身。</p> <ul><li><strong>path:</strong> <code>string</code> 模板路径</li> <li><strong>params:</strong> <code>any[]</code> 参数列表</li> <li>返回值: <code>string</code> 生成的字符串</li></ul> <h3 id="template-set"><a href="#template-set" class="header-anchor">#</a> template.set(path, value)</h3> <p>定义模板字符串。如果 <code>value</code> 是一个对象，则会将 <code>path</code> 作为前缀添加到每个路径中。</p> <ul><li><strong>path:</strong> <code>string</code> 模板路径</li> <li><strong>value:</strong> <code>string | object</code> 模板字符串</li> <li>返回值: <code>void</code></li></ul> <h3 id="template-get"><a href="#template-get" class="header-anchor">#</a> template.get(path)</h3> <p>根据模板路径返回模板字符串。如果路径不存在将会返回路径本身。</p> <ul><li><strong>path:</strong> <code>string</code> 模板路径</li> <li>返回值: <code>string</code> 模板字符串</li></ul> <h3 id="template-format"><a href="#template-format" class="header-anchor">#</a> template.format(source, ...params)</h3> <p>使用模板语法插值。</p> <ul><li><strong>source:</strong> <code>string</code> 模板字符串</li> <li><strong>params:</strong> <code>any[]</code> 参数列表</li> <li>返回值: <code>string</code> 生成的字符串</li></ul> <h2 id="集合操作"><a href="#集合操作" class="header-anchor">#</a> 集合操作</h2> <h3 id="contain"><a href="#contain" class="header-anchor">#</a> contain(array1, array2)</h3> <p>检测集合的包含关系。</p> <ul><li><strong>array1:</strong> <code>readonly any[]</code> 数组 1</li> <li><strong>array2:</strong> <code>readonly any[]</code> 数组 2</li> <li>返回值: <code>boolean</code> 数组 1 是否包含数组 2 的全部元素</li></ul> <h3 id="intersection"><a href="#intersection" class="header-anchor">#</a> intersection(array1, array2)</h3> <p>求两个集合的交集。</p> <ul><li><strong>array1:</strong> <code>readonly any[]</code> 数组 1</li> <li><strong>array2:</strong> <code>readonly any[]</code> 数组 2</li> <li>返回值: <code>any[]</code> 两个数组的交集</li></ul> <h3 id="difference"><a href="#difference" class="header-anchor">#</a> difference(array1, array2)</h3> <p>求两个集合的差集。</p> <ul><li><strong>array1:</strong> <code>readonly any[]</code> 数组 1</li> <li><strong>array2:</strong> <code>readonly any[]</code> 数组 2</li> <li>返回值: <code>any[]</code> 两个数组的差集</li></ul> <h3 id="union"><a href="#union" class="header-anchor">#</a> union(array1, array2)</h3> <p>求两个集合的并集。</p> <ul><li><strong>array1:</strong> <code>readonly any[]</code> 数组 1</li> <li><strong>array2:</strong> <code>readonly any[]</code> 数组 2</li> <li>返回值: <code>any[]</code> 两个数组的并集</li></ul> <h2 id="日期操作"><a href="#日期操作" class="header-anchor">#</a> 日期操作</h2> <h3 id="静态属性"><a href="#静态属性" class="header-anchor">#</a> 静态属性</h3> <ul><li>Time.millisecond</li> <li>Time.second</li> <li>Time.minute</li> <li>Time.hour</li> <li>Time.day</li> <li>Time.week</li></ul> <h3 id="time-getdatenumber"><a href="#time-getdatenumber" class="header-anchor">#</a> Time.getDateNumber(date?)</h3> <p>获取当前日期（从 UNIX 时间开始时计算）。</p> <ul><li><strong>date:</strong> <code>Date</code> 日期对象，默认为 <code>new Date()</code></li> <li>返回值: <code>number</code> UNIX 时间开始后的天数</li></ul> <h3 id="time-fromdatenumber"><a href="#time-fromdatenumber" class="header-anchor">#</a> Time.fromDateNumber(value)</h3> <p>从 UNIX 时间开始后的天数计算日期对象。</p> <ul><li><strong>value:</strong> <code>number</code> UNIX 时间开始后的天数</li> <li>返回值: <code>Date</code> 日期对象</li></ul> <h3 id="time-parsetime"><a href="#time-parsetime" class="header-anchor">#</a> Time.parseTime(source)</h3> <p>将一个字符串解析成时间长度。</p> <ul><li><strong>source:</strong> <code>string</code> 要解析的字符串</li></ul> <h3 id="time-parsedate"><a href="#time-parsedate" class="header-anchor">#</a> Time.parseDate(source)</h3> <p>将一个字符串解析成 Date 对象。</p> <ul><li><strong>source:</strong> <code>string</code> 要解析的字符串</li></ul> <h3 id="time-formattime"><a href="#time-formattime" class="header-anchor">#</a> Time.formatTime(ms)</h3> <ul><li><strong>ms:</strong> <code>number</code> 毫秒数</li></ul> <h3 id="time-formattimeshort"><a href="#time-formattimeshort" class="header-anchor">#</a> Time.formatTimeShort(ms)</h3> <ul><li><strong>ms:</strong> <code>number</code> 毫秒数</li></ul> <h3 id="time-formattimeinterval"><a href="#time-formattimeinterval" class="header-anchor">#</a> Time.formatTimeInterval(time, interval?)</h3> <ul><li><strong>time:</strong> <code>Date</code> 起始时间</li> <li><strong>interval:</strong> <code>number</code> 时间间隔，单位为毫秒</li> <li>返回值: <code>string</code></li></ul> <h2 id="cqcode-操作"><a href="#cqcode-操作" class="header-anchor">#</a> CQCode 操作</h2> <p>CQCode 结构如下：</p> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"><span class="title-text"></span> <!----></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">CQCode</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  type</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span></span>
<span class="line"><span style="color:#F8F8F2;">  data</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Record</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;">string</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">string</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre></div></div><h3 id="cqcode-escape"><a href="#cqcode-escape" class="header-anchor">#</a> CQCode.escape(source, insideCQ?)</h3> <p>转义一段文本到 CQ 码格式。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li><strong>insideCQ:</strong> <code>boolean</code> 在 CQ 码内部转义（会额外处理逗号）</li> <li>返回值: <code>string</code> 转义过后的文本</li></ul> <h3 id="cqcode-unescape"><a href="#cqcode-unescape" class="header-anchor">#</a> CQCode.unescape(souce)</h3> <p>取消一段文本的 CQ 码转义。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>string</code> 转义前的文本</li></ul> <h3 id="cqcode-stringify"><a href="#cqcode-stringify" class="header-anchor">#</a> CQCode.stringify(type, data)</h3> <p>将一个对象转化成 CQ 码文本。</p> <ul><li><strong>type:</strong> <code>string</code> CQ 码类型</li> <li><strong>data:</strong> <code>object</code> CQ 码参数</li> <li>返回值: <code>string</code> 生成的 CQ 码</li></ul> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>类型为 text 的 CQ 码将直接被转化为 <code>data.text</code> 输出。</p></div> <h3 id="cqcode-stringifyall"><a href="#cqcode-stringifyall" class="header-anchor">#</a> CQCode.stringifyAll(codes)</h3> <p>将多个 CQCode 对象转化成文本并连接。</p> <ul><li><strong>codes:</strong> <code>CQCode[]</code> CQ 码数组</li> <li>返回值: <code>string</code> 生成的文本</li></ul> <h3 id="cqcode-parse"><a href="#cqcode-parse" class="header-anchor">#</a> CQCode.parse(source)</h3> <p>将一个 CQ 码文本解析成对象。</p> <ul><li><strong>source:</strong> <code>string</code> CQ 码</li> <li>返回值: <code>CQCode</code> CQ 码的类型和参数</li></ul> <h3 id="cqcode-parseall"><a href="#cqcode-parseall" class="header-anchor">#</a> CQCode.parseAll(source)</h3> <p>解析一段文本内的全部 CQ 码。其中的纯文本将会解析成 text 类型。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>CQCode[]</code> CQ 码数组</li></ul> <h2 id="输出日志"><a href="#输出日志" class="header-anchor">#</a> 输出日志</h2> <h3 id="new-logger"><a href="#new-logger" class="header-anchor">#</a> new Logger(name)</h3> <h3 id="logger-error"><a href="#logger-error" class="header-anchor">#</a> logger.error()</h3> <h3 id="logger-success"><a href="#logger-success" class="header-anchor">#</a> logger.success()</h3> <h3 id="logger-warn"><a href="#logger-warn" class="header-anchor">#</a> logger.warn()</h3> <h3 id="logger-info"><a href="#logger-info" class="header-anchor">#</a> logger.info()</h3> <h3 id="logger-debug"><a href="#logger-debug" class="header-anchor">#</a> logger.debug()</h3> <h2 id="随机数操作"><a href="#随机数操作" class="header-anchor">#</a> 随机数操作</h2> <h3 id="random-uuid"><a href="#random-uuid" class="header-anchor">#</a> Random.uuid()</h3> <p>生成一个标准的 UUID (v5)。</p> <ul><li>返回值: <code>string</code> 生成的 UUID</li></ul> <h3 id="random-bool"><a href="#random-bool" class="header-anchor">#</a> Random.bool(probability)</h3> <p>生成一个随机布尔值，有 probability 的概率为 1。</p> <ul><li><strong>probability:</strong> <code>number</code> 概率</li> <li>返回值: <code>boolean</code> 随机布尔值</li></ul> <h3 id="random-real"><a href="#random-real" class="header-anchor">#</a> Random.real(start?, end)</h3> <p>生成一个随机实数。</p> <ul><li><strong>start:</strong> <code>number</code> 下界，默认为 0</li> <li><strong>end:</strong> <code>end</code> 上界</li> <li>返回值: <code>number</code> 一个 [start, end) 之间的随机实数</li></ul> <h3 id="random-int"><a href="#random-int" class="header-anchor">#</a> Random.int(start?, end)</h3> <p>生成一个随机实数。</p> <ul><li><strong>start:</strong> <code>number</code> 下界，默认为 0</li> <li><strong>end:</strong> <code>end</code> 上界</li> <li>返回值: <code>number</code> 一个 [start, end) 之间的随机整数</li></ul> <h3 id="random-shuffle"><a href="#random-shuffle" class="header-anchor">#</a> Random.shuffle(array)</h3> <p>随机打乱数组中的元素，返回新的数组。</p> <ul><li><strong>array:</strong> <code>T[]</code> 数组</li> <li>返回值: <code>T[]</code> 新的数组</li></ul> <h3 id="random-pick"><a href="#random-pick" class="header-anchor">#</a> Random.pick(array)</h3> <p>从数组中随机挑出一个元素，不改变原数组。</p> <ul><li><strong>array:</strong> <code>readonly T[]</code> 数组</li> <li>返回值: <code>T</code> 挑出的元素</li></ul> <h3 id="random-multipick"><a href="#random-multipick" class="header-anchor">#</a> Random.multiPick(array, count)</h3> <p>从数组中随机挑出一些元素，不改变原数组。</p> <ul><li><strong>array:</strong> <code>readonly T[]</code> 数组</li> <li><strong>count:</strong> <code>number</code> 元素个数</li> <li>返回值: <code>T[]</code> 挑出的元素列表</li></ul> <h3 id="random-weightedpick"><a href="#random-weightedpick" class="header-anchor">#</a> Random.weightedPick(weights, value?)</h3> <p>按照权重随机挑出一个元素。</p> <ul><li><strong>weights:</strong> <code>Record&lt;T, number&gt;</code> 权重表</li> <li><strong>value:</strong> <code>number</code> 一个 0 到 1 之间的随机数，默认为 <code>Math.random()</code></li> <li>返回值: <code>T</code> 挑出的元素</li></ul> <h2 id="其他工具函数"><a href="#其他工具函数" class="header-anchor">#</a> 其他工具函数</h2> <h3 id="noop"><a href="#noop" class="header-anchor">#</a> noop()</h3> <p>不进行任何操作（no operation）。</p> <ul><li>返回值: <code>void</code></li></ul> <h3 id="sleep"><a href="#sleep" class="header-anchor">#</a> sleep(ms?)</h3> <p>等待一段时间。</p> <ul><li><strong>ms:</strong> <code>number</code> 要等待的毫秒数</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="isinteger"><a href="#isinteger" class="header-anchor">#</a> isInteger(value)</h3> <p>判断传入的值是否为整数。</p> <ul><li><strong>value:</strong> <code>any</code> 要判断的值</li> <li>返回值: <code>boolean</code> 是否为整数</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/koishijs/koishijs.github.io/edit/docs/api/utils.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/4/2021, 9:57:24 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/database.html" class="prev">
        数据库 (Database)
      </a></span> <span class="next"><a href="/api/test-utils.html">
        测试工具 (Test Utils)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.cd7094d9.js" defer></script><script src="/assets/js/2.9ff48064.js" defer></script><script src="/assets/js/9.4a353ef9.js" defer></script><script src="/assets/js/27.a7d44d0f.js" defer></script><script src="/assets/js/5.1ec24116.js" defer></script>
  </body>
</html>
