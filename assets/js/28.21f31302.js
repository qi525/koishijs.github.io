(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{442:function(t,a,s){"use strict";s.r(a);var c=s(25),o=Object(c.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"指令系统初探"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令系统初探"}},[t._v("#")]),t._v(" 指令系统初探")]),t._v(" "),s("p",[t._v("一个成功的机器人离不开强大的"),s("strong",[t._v("指令系统")]),t._v("。正因为如此，Koishi 在编写时也广泛研究了许多指令系统的实现，并做成了如今的规模。使用 Koishi，你可以方便地创建和管理各种指令，并能够高效地处理大量指令的并发调用。同时，Koishi 还提供了快捷方式、多级指令、自定义前缀等功能，同时支持调用次数和频率限制，权限管理等高级特性，让你得以高自由度来配置你的机器人。")]),t._v(" "),s("p",[t._v("编写下面的代码，你就实现了一个简单的 echo 指令：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'echo <message>'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("((")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("_")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("message")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" message)")])])])])]),s("panel-view",{attrs:{title:"聊天记录"}},[s("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[t._v("echo Hello!")]),t._v(" "),s("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[t._v("Hello!")])],1),t._v(" "),s("p",[t._v("让我们回头看看这段代码是如何工作的：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v(".command()")]),t._v(" 方法定义了一个 echo 指令，其有一个必选参数为 message")]),t._v(" "),s("li",[s("code",[t._v(".action()")]),t._v(" 方法定义了指令触发时的回调函数，第一个参数是一个 Argv 对象，第二个参数是输入的 message")])]),t._v(" "),s("p",[t._v("这种链式的结构能够让我们非常方便地定义和扩展指令。稍后我们将看到这两个函数的更多用法，以及更多指令相关的函数。")]),t._v(" "),s("h2",{attrs:{id:"定义参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义参数"}},[t._v("#")]),t._v(" 定义参数")]),t._v(" "),s("p",[t._v("正如你在上面所见的那样，使用 "),s("code",[t._v("app.command(desc)")]),t._v(" 方法可以定义一个指令，其中 "),s("code",[t._v("desc")]),t._v(" 是一个字符串，包含了"),s("strong",[t._v("指令名")]),t._v("和"),s("strong",[t._v("参数列表")]),t._v("。")]),t._v(" "),s("ul",[s("li",[t._v("指令名可以包含数字、字母、下划线、短横线甚至中文字符，但不应该包含空格、小数点 "),s("code",[t._v(".")]),t._v(" 或斜杠 "),s("code",[t._v("/")]),t._v("。")]),t._v(" "),s("li",[t._v("一个指令可以含有任意个参数。其中"),s("strong",[t._v("必选参数")]),t._v("用尖括号包裹，"),s("strong",[t._v("可选参数")]),t._v("用方括号包裹。")])]),t._v(" "),s("p",[t._v("例如，下面的程序定义了一个拥有三个参数的指令，第一个为必选参数，后面两个为可选参数，它们将分别作为 "),s("code",[t._v("action")]),t._v(" 回调函数的第 2, 3, 4 个参数：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'my-command <arg1> [arg2] [arg3]'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("((")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("_")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("arg1")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("arg2")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("arg3")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" { ")]),s("span",{staticStyle:{color:"#88846F"}},[t._v("/* do something */")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")])])])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("除去表达的意义不同，以及参数个数不足时使用必选参数可能产生错误信息外，这两种参数在程序上是没有区别的。与此同时，默认情况下 "),s("code",[t._v("action")]),t._v(" 回调函数从第二个参数起也总是字符串。如果传入的参数不足，则对应的参数不会被传入，因此你需要自己处理可能的 "),s("code",[t._v("undefined")]),t._v("。")])]),t._v(" "),s("h3",{attrs:{id:"变长参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#变长参数"}},[t._v("#")]),t._v(" 变长参数")]),t._v(" "),s("p",[t._v("有时我们需要传入未知数量的参数，这时我们可以使用"),s("strong",[t._v("变长参数")]),t._v("，它可以通过在括号中前置 "),s("code",[t._v("...")]),t._v(" 来实现。在下面的例子中，无论传入了多少个参数，都会被放入 "),s("code",[t._v("rest")]),t._v(" 数组进行处理：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'my-command <arg1> [...rest]'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("((")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("_")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("arg1")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("...")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("rest")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" { ")]),s("span",{staticStyle:{color:"#88846F"}},[t._v("/* do something */")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")])])])])]),s("h3",{attrs:{id:"文本参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文本参数"}},[t._v("#")]),t._v(" 文本参数")]),t._v(" "),s("p",[t._v("通常来说传入的信息被解析成指令调用后，会被空格分割成若干个参数。但如果你想输入的就是含有空格的内容，可以通过在括号中后置 "),s("code",[t._v(":text")]),t._v(" 来声明一个"),s("strong",[t._v("文本参数")]),t._v("。\n在下面的例子中，即使 my-command 后面的内容中含有空格，也会被整体传入 "),s("code",[t._v("message")]),t._v(" 中：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'my-command <message:text>'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("((")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("_")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("message")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" { ")]),s("span",{staticStyle:{color:"#88846F"}},[t._v("/* do something */")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")])])])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("文本参数的解析优先级很高，即使是之后的内容中含有选项也会被一并认为是该参数的一部分。因此，当使用文本参数时，应确保选项写在该参数之前，或"),s("a",{attrs:{href:"#%E4%BD%BF%E7%94%A8%E5%BC%95%E5%8F%B7"}},[t._v("使用引号")]),t._v("将要输入的文本包裹起来。")])]),t._v(" "),s("h2",{attrs:{id:"定义选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义选项"}},[t._v("#")]),t._v(" 定义选项")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("cmd.option(name, desc)")]),t._v(" 函数可以给指令定义参数。这个函数也是可以链式调用的，就像这样：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'my-command'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'alpha'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-a'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")          ")]),s("span",{staticStyle:{color:"#88846F"}},[t._v("// 定义一个选项")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'beta'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-b [beta]'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")    ")]),s("span",{staticStyle:{color:"#88846F"}},[t._v("// 定义一个带参数的可选选项")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'gamma'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-c <gamma>'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")  ")]),s("span",{staticStyle:{color:"#88846F"}},[t._v("// 定义一个带参数的必选选项")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(({ ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("options")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" }) ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("JSON")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(".")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("stringify")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(options))")])])])])]),s("panel-view",{attrs:{title:"聊天记录"}},[s("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[t._v("my-command -adb text --gamma=1 --foo-bar baz --no-xyz")]),t._v(" "),s("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[t._v('{ "alpha": true, "d": true, "beta": "text", "gamma": 1, "fooBar": "baz", "xyz": false }')])],1),t._v(" "),s("p",[t._v("从上面的例子中我们不难看出 Koishi 指令系统的许多方便的特性：")]),t._v(" "),s("ul",[s("li",[t._v("使用注册的多个别名中的任何一个都会被赋值到 "),s("code",[t._v("name")]),t._v(" 中")]),t._v(" "),s("li",[t._v("选项和参数之间同时支持用空格或等号隔开的语法")]),t._v(" "),s("li",[t._v("单个短横线后跟多个字母时，会把之后的参数赋给最后一个字母（如果需要参数的话）")]),t._v(" "),s("li",[t._v("多字母中如果有短横线，会被自动进行驼峰式处理")]),t._v(" "),s("li",[t._v("类型自动转换：无参数默认为 "),s("code",[t._v("true")]),t._v("，如果是数字会转化为数字，其余情况为字符串")]),t._v(" "),s("li",[t._v("支持识别未注册选项，同时会根据传入的命令行推测是否需要参数")]),t._v(" "),s("li",[t._v("如果一个未注册选项以 "),s("code",[t._v("no-")]),t._v(" 开头，则会自动去除这个前缀并处理为 "),s("code",[t._v("false")])])]),t._v(" "),s("p",[t._v("在调用 "),s("code",[t._v("cmd.option()")]),t._v(" 时，你还可以传入第三个参数，它应该是一个对象，用于配置选项的具体特性。它们将在下面逐一介绍。")]),t._v(" "),s("h3",{attrs:{id:"选项的默认值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项的默认值"}},[t._v("#")]),t._v(" 选项的默认值")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("fallback")]),t._v(" 配置选项的默认值。配置了默认值的选项，如果没有被使用，则会按照注册的默认值进行赋值。")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'my-command'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'alpha'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-a'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", { fallback: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("100")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'beta'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-b'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", { fallback: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("100")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(({ ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("options")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" }) ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("JSON")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(".")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("stringify")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(options))")])])])])]),s("panel-view",{attrs:{title:"聊天记录"}},[s("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[t._v("my-command -b 80")]),t._v(" "),s("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[t._v('{ "alpha": 100, "beta": 80 }')])],1),t._v(" "),s("h3",{attrs:{id:"选项的重载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项的重载"}},[t._v("#")]),t._v(" 选项的重载")]),t._v(" "),s("p",[t._v("将同一个选项注册多次，并结合使用 "),s("code",[t._v("value")]),t._v(" 配置选项的重载值。如果使用了带有重载值的选项，将按照注册的重载值进行赋值。")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'my-command'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'writer'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-w <id>'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'writer'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'--anonymous'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", { value: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("0")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(({ ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("options")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" }) ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("JSON")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(".")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("stringify")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(options))")])])])])]),s("panel-view",{attrs:{title:"聊天记录"}},[s("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[t._v("my-command --anonymous")]),t._v(" "),s("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[t._v('{ "writer": 0 }')])],1),t._v(" "),s("h2",{attrs:{id:"类型系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类型系统"}},[t._v("#")]),t._v(" 类型系统")]),t._v(" "),s("p",[t._v("Koishi v3 加入了参数的类型系统。它的作用是规约参数和选项的类型，并在指令执行前就对不合法的调用发出警告。定义一个带类型的参数或选项很简单：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#66D9EF"}},[t._v("function")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("showValue")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("value")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") {")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("return")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("`")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("${")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("typeof")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" value")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("}")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v(" ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("${")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("JSON")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(".")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("stringify")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(value)")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("}")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("`")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("}")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'my-command [arg:number]'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'foo'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'<val:string>'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(({ ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("options")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" }, ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("arg")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("`")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("${")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("showValue")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(arg)")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("}")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v(" ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("${")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("showValue")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(options.foo)")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("}")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("`")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])])])])]),s("panel-view",{attrs:{title:"聊天记录"}},[s("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[t._v("my-command 100 --foo 200")]),t._v(" "),s("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[t._v('number 100 string "200"')])],1),t._v(" "),s("p",[t._v("如你所见，上文所介绍的文本参数也正是一个内置类型。")]),t._v(" "),s("h3",{attrs:{id:"定义新类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义新类型"}},[t._v("#")]),t._v(" 定义新类型")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("Domain.create()")]),t._v(" 创建新类型：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F92672"}},[t._v("import")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" { Domain } ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("from")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'koishi-core'")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("Domain.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("create")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'repeat'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("source")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" source.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("repeat")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("3")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("))")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'test [arg:repeat]'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("((")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("_")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("arg")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" arg)")])])])])]),s("panel-view",{attrs:{title:"聊天记录"}},[s("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[t._v("test foo")]),t._v(" "),s("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[t._v("foofoofoo")])],1),t._v(" "),s("h3",{attrs:{id:"类型检查"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类型检查"}},[t._v("#")]),t._v(" 类型检查")]),t._v(" "),s("p",[t._v("你也可以在 "),s("code",[t._v("Domain.create()")]),t._v(" 的回调函数中抛出错误，以实现类型检查的目的：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F92672"}},[t._v("import")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" { Domain } ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("from")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'koishi-core'")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("Domain.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("create")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'int'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", (")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("source")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" {")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("if")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" (")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("/")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("^")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("-")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("?")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("\\d")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("+$")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("/")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(".")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("test")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(source)) ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("throw")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("new")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("Error")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'应为整数。'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("return")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("+")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("source")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("})")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'test [x:int]'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("((")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("_")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("arg")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" arg)")])])])])]),s("panel-view",{attrs:{title:"聊天记录"}},[s("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[t._v("test 0.5")]),t._v(" "),s("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[t._v("参数 x 输入无效，应为整数。")])],1),t._v(" "),s("h3",{attrs:{id:"选项的临时类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项的临时类型"}},[t._v("#")]),t._v(" 选项的临时类型")]),t._v(" "),s("p",[t._v("你可以在 "),s("code",[t._v("cmd.option()")]),t._v(" 的第三个参数中传入一个 "),s("code",[t._v("type")]),t._v(" 属性，作为选项的临时类型声明。它可以是像上面的例子一样的回调函数，也可以是一个 "),s("code",[t._v("RegExp")]),t._v(" 对象，表示传入的选项应当匹配的正则表达式：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'test'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'foo'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-f <foo>'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", { type:")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v(" /")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("^")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("ba")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("+")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("r")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("$")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("/")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(({ ")]),s("span",{staticStyle:{color:"#FD971F"}},[t._v("options")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" }) ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" options.foo)")])])])])]),s("panel-view",{attrs:{title:"聊天记录"}},[s("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[t._v("test -f baaaz")]),t._v(" "),s("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[t._v("选项 foo 输入无效，请检查语法。")])],1),t._v(" "),s("h3",{attrs:{id:"使用检查器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用检查器"}},[t._v("#")]),t._v(" 使用检查器")]),t._v(" "),s("p",[t._v("从 v3 开始 Koishi 支持给一个指令配置多个回调函数，并引入了 "),s("code",[t._v("cmd.check()")]),t._v("。你可以利用这个接口定义一些更加复杂的类型检查逻辑。让我们在最后简单地了解一下这个特性。")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("command")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'test'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("check")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(checker1)")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("check")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(checker2)")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(action1)")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  .")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("action")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(action2)")])])])])]),s("p",[t._v("在上面的代码中，我们给 test 指令配置了 4 个回调函数。在运行时，这 4 个函数将逐一被调用。当其中一个函数返回值的类型为 "),s("code",[t._v("string")]),t._v(" 时，这个调用过程停止，并输出这个返回值（如果返回空串，调用依然会停止，此时没有输出）。")]),t._v(" "),s("p",[t._v("在执行顺序上，同时，"),s("code",[t._v(".check()")]),t._v(" 回调函数是先注册的先调用；而 "),s("code",[t._v(".action()")]),t._v(" 则是最后注册的先调用。你还可以通过在注册回调函数时传入 truthy 作为第二个参数来实现这个效果的反转。")]),t._v(" "),s("p",[t._v("指令执行时将按照下面的顺序注意调用：")]),t._v(" "),s("ul",[s("li",[t._v("before-command 事件（包括 check 回调函数）")]),t._v(" "),s("li",[t._v("action 回调函数")]),t._v(" "),s("li",[t._v("command 事件")])]),t._v(" "),s("p",[t._v("因此，检查器可以在 "),s("code",[t._v("usage")]),t._v(" 这样的属性尚未发生更新时进行操作，并提前退出执行流程。")])],1)}),[],!1,null,null,null);a.default=o.exports}}]);