(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{406:function(t,s,a){"use strict";a.r(s);var l=a(25),e=Object(l.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"其他机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他机制"}},[t._v("#")]),t._v(" 其他机制")]),t._v(" "),a("h2",{attrs:{id:"钩子问答"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#钩子问答"}},[t._v("#")]),t._v(" 钩子问答")]),t._v(" "),a("p",[t._v("对于特定的事件，Koishi 还提供了"),a("strong",[t._v("钩子问答")]),t._v("机制。")]),t._v(" "),a("h2",{attrs:{id:"署名机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#署名机制"}},[t._v("#")]),t._v(" 署名机制")]),t._v(" "),a("p",[t._v("为了方便管理，教学系统中的每个问答都是可以被署名的。当一个问答被添加时，添加者将被默认标记为问答的作者。"),a("strong",[t._v("作者可以完全控制自己所署名的问答（修改和删除），但想要控制其他用户署名的问答就必须拥有 3 级权限")]),t._v("。")]),t._v(" "),a("p",[t._v("如果想要手动设置作者，可以使用 "),a("code",[t._v("-w uid")]),t._v(" 或者 "),a("code",[t._v("-w @user")]),t._v(" 的方式。除此以外，Koishi 也允许匿名教学。任何用户都可以通过 "),a("code",[t._v("-W")]),t._v(" 来设置匿名问答（但是如果没有 3 级权限，即使是作者本人也无法修改）。这两个选项在搜索中也可以使用，例如用 "),a("code",[t._v("-W")]),t._v(" 表示只搜索匿名添加的问答。")]),t._v(" "),a("p",[t._v("除此以外，还有极少数的题目被标记为"),a("strong",[t._v("锁定")]),t._v("。标记为锁定的问题无论是否匿名，必须 4 级权限才能修改。可以使用 "),a("code",[t._v("-f")]),t._v(" 将一个问答标记为锁定，使用 "),a("code",[t._v("-F")]),t._v(" 进行解锁。不过这个功能只是为了保护核心问答不被篡改而设计的，使用这两个选项本身的最低权限也是 4 级，绝大部分玩家都不会有这个权限。")]),t._v(" "),a("h2",{attrs:{id:"设置触发时段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置触发时段"}},[t._v("#")]),t._v(" 设置触发时段")]),t._v(" "),a("p",[t._v("我们有时也希望问答仅在一定的时间段被触发。此时，可以使用 "),a("code",[t._v("-t")]),t._v(" 和 "),a("code",[t._v("-T")]),t._v(" 来控制触发的时段。下面给出一些简单的示例：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("效果")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("# 问题 回答 -t 10:00 -T 12:30")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("添加在每天 10:00~12:30 触发的问答")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("# 问题 回答 -t 22 -T 4")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("添加在每天 22 时到次日 4 时触发的问答")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("#123 -t 12:00")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("将问题 123 的触发时段起始时间设置为每天 12:00")])])])]),t._v(" "),a("p",[t._v("同样与好感度类似，上述定义为前闭后开区间，且如果 t=T 则认为所有时间都允许触发。在搜索时，我们也用 "),a("code",[t._v("-t")]),t._v(" 和 "),a("code",[t._v("-T")]),t._v(" 表示允许触发和不允许触发的时间节点。例如，t=15, T=1 可以匹配 t=10, T=20 的问题，但是不能匹配 t=10, T=4 或 t=23, T=11 的问题。")]),t._v(" "),a("h2",{attrs:{id:"防刷屏机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防刷屏机制"}},[t._v("#")]),t._v(" 防刷屏机制")]),t._v(" "),a("p",[t._v("为了控制机器人在单一群触发教学问答的频率，我们可以设定当机器人在 1 分钟内在某个群中触发过超过 10 次问答，则 Koishi 将忽略该群内的消息直到这个数字降低到 10 以下为止。这里的数值都是可以配置的：")]),t._v(" "),a("panel-view",{staticClass:"code",attrs:{title:"koishi.config.js"}},[a("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#66D9EF"}},[t._v("module")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(".")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("exports")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("=")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" {")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  plugins: {")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    teach: {")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("      throttle: {")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("        responses: ")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("10")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("        interval: ")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("60000")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("      },")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    },")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  }")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("}")])])])])]),a("p",[t._v("为了防止多个机器人之间的循环触发，以及部分用户的攻击性刷屏行为，我们可以设定如果最近的 5 次教学问答都由某 1 个用户触发，则 Koishi 将不会继续响应来自该用户的教学问答。该效果会在该用户没有发送除指令调用以外消息之后的 5 分钟内被解除。这里的数值也都是可以配置的：")]),t._v(" "),a("panel-view",{staticClass:"code",attrs:{title:"koishi.config.js"}},[a("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#66D9EF"}},[t._v("module")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(".")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("exports")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("=")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" {")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  plugins: {")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    teach: {")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("      preventLoop: {")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("        length: ")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("5")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("        participants: ")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("1")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("        debounce: ")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("300000")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("      },")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    },")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  }")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("}")])])])])]),a("h2",{attrs:{id:"使用静态图片服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用静态图片服务"}},[t._v("#")]),t._v(" 使用静态图片服务")])],1)}),[],!1,null,null,null);s.default=e.exports}}]);