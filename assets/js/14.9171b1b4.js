(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{437:function(t,s,a){"use strict";a.r(s);var o=a(25),e=Object(o.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用"}},[t._v("#")]),t._v(" 应用 (App)")]),t._v(" "),a("p",[a("strong",[t._v("应用 (App)")]),t._v(" 是 "),a("RouterLink",{attrs:{to:"/api/context.html"}},[t._v("Context")]),t._v(" 的一个子类，它是程序的入口，管理着全部机器人的信息。除了 Context 中已有的属性和方法以外，App 还提供了下面的属性和方法：")],1),t._v(" "),a("h2",{attrs:{id:"构造函数选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构造函数选项"}},[t._v("#")]),t._v(" 构造函数选项")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("new App(options)")]),t._v(" 创建一个 App 实例。")]),t._v(" "),a("h3",{attrs:{id:"options-port"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-port"}},[t._v("#")]),t._v(" options.port")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("number")])])]),t._v(" "),a("p",[t._v("服务器监听的端口。")]),t._v(" "),a("h3",{attrs:{id:"options-bots"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-bots"}},[t._v("#")]),t._v(" options.bots")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("BotOptions[]")])])]),t._v(" "),a("p",[t._v("账号相关配置。如果你使用多个账号，这里应该传入一个数组。例如下面的写法是等价的：")]),t._v(" "),a("panel-view",{staticClass:"code",attrs:{title:""}},[a("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F92672"}},[t._v("new")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#A6E22E"}},[t._v("App")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("({ selfId: ")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("123")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")])]),t._v("\n\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F92672"}},[t._v("new")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#A6E22E"}},[t._v("App")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("({")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  bots: [{ selfId: ")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("123")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" }],")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("})")])])])])]),a("h3",{attrs:{id:"options-bots-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-bots-type"}},[t._v("#")]),t._v(" options(.bots[]).type")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("string")])])]),t._v(" "),a("p",[t._v("机器人的通信方式，对应你所使用的上游协议，例如 "),a("code",[t._v("onebot")]),t._v(" 或 "),a("code",[t._v("kaiheila")]),t._v(" 等。")]),t._v(" "),a("h3",{attrs:{id:"options-bots-selfid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-bots-selfid"}},[t._v("#")]),t._v(" options(.bots[]).selfId")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("number")])])]),t._v(" "),a("p",[t._v("机器人自己的 QQ 号。")]),t._v(" "),a("h3",{attrs:{id:"options-nickname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-nickname"}},[t._v("#")]),t._v(" options.nickname")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("string | string[]")])])]),t._v(" "),a("p",[t._v("机器人的昵称，可以是字符串或字符串数组。将用于指令前缀的匹配。例如，如果配置该选项为 "),a("code",[t._v("'恋恋'")]),t._v("，则你可以通过 "),a("code",[t._v("恋恋，help")]),t._v(" 来进行 help 指令的调用。参见 "),a("RouterLink",{attrs:{to:"/guide/command.html#指令前缀"}},[a("strong",[t._v("指令前缀")])]),t._v(" 一节。")],1),t._v(" "),a("h3",{attrs:{id:"options-prefix"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-prefix"}},[t._v("#")]),t._v(" options.prefix")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("string | string[]")])])]),t._v(" "),a("p",[t._v("指令前缀字符，可以是字符串或字符串数组。将用于指令前缀的匹配。例如，如果配置该选项为 "),a("code",[t._v(".")]),t._v("，则你可以通过 "),a("code",[t._v(".help")]),t._v(" 来进行 help 指令的调用。参见 "),a("RouterLink",{attrs:{to:"/guide/command.html#指令前缀"}},[a("strong",[t._v("指令前缀")])]),t._v(" 一节。")],1),t._v(" "),a("h3",{attrs:{id:"options-delay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-delay"}},[t._v("#")]),t._v(" options.delay")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("DelayOptions")])])]),t._v(" "),a("panel-view",{staticClass:"code",attrs:{title:""}},[a("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#66D9EF"}},[t._v("interface")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#A6E22E"}},[t._v("DelayOptions")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" {")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  character")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("?:")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("number")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  message")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("?:")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("number")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  cancel")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("?:")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("number")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  broadcast")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("?:")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("number")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  prompt")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("?:")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("number")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("}")])])])])]),a("h3",{attrs:{id:"options-maxlisteners"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-maxlisteners"}},[t._v("#")]),t._v(" options.maxListeners")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("number")])])]),t._v(" "),a("p",[t._v("每种钩子的最大数量。如果超过这个数量，Koishi 会认定为发生了内存泄漏，将产生一个警告。默认值为 "),a("code",[t._v("64")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"options-processmessage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-processmessage"}},[t._v("#")]),t._v(" options.processMessage")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("(message: string) => string")])])]),t._v(" "),a("p",[t._v("对消息进行提前处理的方式，它将直接作用与 "),a("code",[t._v("session.message")]),t._v("。默认值为 "),a("code",[t._v("message => simplify(message.trim())")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"options-autoauthorize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-autoauthorize"}},[t._v("#")]),t._v(" options.autoAuthorize")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("number | ((session: Session) => number)")])])]),t._v(" "),a("p",[t._v("当获取不到用户数据时默认使用的权限等级。")]),t._v(" "),a("h3",{attrs:{id:"options-autoassign"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-autoassign"}},[t._v("#")]),t._v(" options.autoAssign")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("boolean | ((session: Session) => boolean)")])])]),t._v(" "),a("p",[t._v("当获取不到频道数据时，是否使用接受者作为代理者。")]),t._v(" "),a("h3",{attrs:{id:"options-prettyerrors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-prettyerrors"}},[t._v("#")]),t._v(" options.prettyErrors")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("boolean")])])]),t._v(" "),a("p",[t._v("启用报错优化模式。在此模式下 Koishi 会对程序抛出的异常进行整理，过滤掉框架内部的调用记录，输出更易读的提示信息。默认值为 "),a("code",[t._v("true")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"options-similaritycoefficient"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-similaritycoefficient"}},[t._v("#")]),t._v(" options.similarityCoefficient")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("number")])])]),t._v(" "),a("p",[t._v("用于模糊匹配的相似系数，应该是一个 0 到 1 之间的数值。数值越高，模糊匹配越严格。设置为 1 可以完全禁用模糊匹配。参见 "),a("RouterLink",{attrs:{to:"/guide/command.html#模糊匹配"}},[a("strong",[t._v("模糊匹配")])]),t._v(" 一节。")],1),t._v(" "),a("h2",{attrs:{id:"配置文件选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件选项"}},[t._v("#")]),t._v(" 配置文件选项")]),t._v(" "),a("p",[t._v("下面的配置项来自 koishi 的命令行工具，仅可用于 koishi.config.js。")]),t._v(" "),a("h3",{attrs:{id:"options-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-plugins"}},[t._v("#")]),t._v(" options.plugins")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("Record<string, any> | [string | Plugin, any?][]")])])]),t._v(" "),a("p",[t._v("要安装的插件列表。如果传入一个列表，则依次安装列表中的插件；如果传入一个对象，则以对象的键为插件名，值为插件的选项进行安装。参见 "),a("RouterLink",{attrs:{to:"/guide/plugin-and-context.html"}},[a("strong",[t._v("插件与上下文")])]),t._v(" 一章。")],1),t._v(" "),a("h3",{attrs:{id:"options-loglevel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-loglevel"}},[t._v("#")]),t._v(" options.logLevel")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("number")])])]),t._v(" "),a("p",[t._v("默认的输出等级。默认值为 "),a("code",[t._v("2")]),t._v("。参见 "),a("RouterLink",{attrs:{to:"/guide/logger.html#设置输出等级"}},[a("strong",[t._v("设置输出等级")])]),t._v(" 一节。")],1),t._v(" "),a("h3",{attrs:{id:"options-logfilter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-logfilter"}},[t._v("#")]),t._v(" options.logFilter")]),t._v(" "),a("ul",[a("li",[t._v("类型："),a("code",[t._v("Record<string, number>")])])]),t._v(" "),a("p",[t._v("用于在某些范围覆盖默认的输出等级。参见 "),a("RouterLink",{attrs:{to:"/guide/logger.html#过滤输出"}},[a("strong",[t._v("过滤输出")])]),t._v(" 一节。")],1),t._v(" "),a("h2",{attrs:{id:"实例属性和方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实例属性和方法"}},[t._v("#")]),t._v(" 实例属性和方法")]),t._v(" "),a("h3",{attrs:{id:"app-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-options"}},[t._v("#")]),t._v(" app.options")]),t._v(" "),a("p",[t._v("当前 App 创建时传入的配置。")]),t._v(" "),a("h3",{attrs:{id:"app-status"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-status"}},[t._v("#")]),t._v(" app.status")]),t._v(" "),a("p",[t._v("当前 App 的运行状态。它可能是下列数值中的一个：")]),t._v(" "),a("ul",[a("li",[t._v("Status.closed = 0")]),t._v(" "),a("li",[t._v("Status.opening = 1")]),t._v(" "),a("li",[t._v("Status.open = 2")]),t._v(" "),a("li",[t._v("Status.closing = 3")])]),t._v(" "),a("h3",{attrs:{id:"app-start"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-start"}},[t._v("#")]),t._v(" app.start()")]),t._v(" "),a("p",[t._v("启动此应用。")]),t._v(" "),a("ul",[a("li",[t._v("返回值: "),a("code",[t._v("Promise<void>")])])]),t._v(" "),a("h3",{attrs:{id:"app-stop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-stop"}},[t._v("#")]),t._v(" app.stop()")]),t._v(" "),a("p",[t._v("停止此应用。")]),t._v(" "),a("ul",[a("li",[t._v("返回值: "),a("code",[t._v("Promise<void>")])])])],1)}),[],!1,null,null,null);s.default=e.exports}}]);