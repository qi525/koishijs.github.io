(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{388:function(v,_,t){"use strict";t.r(_);var a=t(25),e=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"正则匹配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正则匹配"}},[v._v("#")]),v._v(" 正则匹配")]),v._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[v._v("WARNING")]),v._v(" "),t("p",[v._v("正则匹配功能的最低使用权限为 3 级。你可以通过配置 "),t("RouterLink",{attrs:{to:"/plugins/teach/config.html#authority"}},[v._v("authority.regExp")]),v._v(" 修改这个行为。")],1)]),v._v(" "),t("h2",{attrs:{id:"基本用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本用法"}},[v._v("#")]),v._v(" 基本用法")]),v._v(" "),t("p",[v._v("如果你希望匹配问题中的某些特征而不是问题整体，你可以使用 "),t("code",[v._v("-x")]),v._v(" 进行正则表达式匹配。下面是一个例子：")]),v._v(" "),t("panel-view",{attrs:{title:"聊天记录"}},[t("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[v._v("# ^(.+)一时爽$ 一直%1一直爽 -x")]),v._v(" "),t("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[v._v("问答已添加，编号为 1001。")]),v._v(" "),t("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[v._v("挖坑一时爽")]),v._v(" "),t("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[v._v("一直挖坑一直爽")])],1),v._v(" "),t("p",[v._v("在这个例子中，"),t("code",[v._v("^")]),v._v(" 和 "),t("code",[v._v("$")]),v._v(" 分别匹配问答的起始和结尾，"),t("code",[v._v(".+")]),v._v(" 匹配若干个非换行字符，"),t("code",[v._v("%1")]),v._v(" 表示第一个括号内的文本。这样的语法极大地提升了问答捕获的自由度。")]),v._v(" "),t("p",[v._v("对于已有的问答，我们也可以使用 "),t("code",[v._v("-X")]),v._v(" 来取消使用正则表达式匹配。")]),v._v(" "),t("p",[v._v("此外，我们约定在实际触发时，如果一个问题同时能够触发正则匹配和非正则匹配的回答，会优先触发非正则匹配的问答。因此不必担心正则匹配的教学会影响已有问答的触发效果。")]),v._v(" "),t("h2",{attrs:{id:"支持的语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#支持的语法"}},[v._v("#")]),v._v(" 支持的语法")]),v._v(" "),t("p",[v._v("下面是教学功能所支持的正则表达式语法：")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("\\")]),v._v("：对后面的字符进行转义")]),v._v(" "),t("li",[t("code",[v._v(".")]),v._v("：匹配除换行以外的任意字符")]),v._v(" "),t("li",[t("code",[v._v("^")]),v._v(", "),t("code",[v._v("$")]),v._v("：匹配开头 / 结尾位置")]),v._v(" "),t("li",[t("code",[v._v("[abx-z]")]),v._v(", "),t("code",[v._v("[^abx-z]")]),v._v("：匹配正值 / 负值字符集合")]),v._v(" "),t("li",[t("code",[v._v("*")]),v._v("：匹配前面的子式任意次")]),v._v(" "),t("li",[t("code",[v._v("+")]),v._v("：匹配前面的子式至少 1 次")]),v._v(" "),t("li",[t("code",[v._v("?")]),v._v("：匹配前面的子式 0 次或 1 次")]),v._v(" "),t("li",[t("code",[v._v("{n}")]),v._v("：匹配前面的子式 n 次")]),v._v(" "),t("li",[t("code",[v._v("{m,n}")]),v._v("：匹配前面的子式至少 m 最多 n 次")]),v._v(" "),t("li",[t("code",[v._v("x|y")]),v._v("：匹配 x 或 y")]),v._v(" "),t("li",[t("code",[v._v("(patt)")]),v._v("：匹配 patt 并捕获")])]),v._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[v._v("警告")]),v._v(" "),t("p",[v._v("MySQL 5.7 使用的正则表达式规范是 POSIX 1003.2，这是一个很落后的版本。因此，如果你使用 koishi-plugin-mysql，下面的语法都是"),t("strong",[v._v("不被支持")]),v._v("的：")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("\\d")]),v._v(", "),t("code",[v._v("\\D")]),v._v("：转义字符集")]),v._v(" "),t("li",[t("code",[v._v("\\b")]),v._v(", "),t("code",[v._v("\\B")]),v._v("：单词边界")]),v._v(" "),t("li",[t("code",[v._v("+?")]),v._v(", "),t("code",[v._v("*?")]),v._v("：非贪婪匹配")]),v._v(" "),t("li",[t("code",[v._v("(?:")]),v._v(", "),t("code",[v._v("(?=")]),v._v("：非捕获组")])])]),v._v(" "),t("h2",{attrs:{id:"正则表达式与称呼匹配问答"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正则表达式与称呼匹配问答"}},[v._v("#")]),v._v(" 正则表达式与称呼匹配问答")]),v._v(" "),t("p",[v._v("TODO")]),v._v(" "),t("h2",{attrs:{id:"搜索中的正则匹配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搜索中的正则匹配"}},[v._v("#")]),v._v(" 搜索中的正则匹配")]),v._v(" "),t("p",[v._v("默认情况下，使用搜索功能的效果与实际触发时类似。换言之，当你使用问答搜索时，无论正则匹配还是非正则匹配到的问答都会被显示。但在一些情况下，我们可能会有其他不同的需求。")]),v._v(" "),t("p",[v._v("最常见的情况就是我们希望用正则表达式来搜索问答原文（这听起来与普通的搜索有点类似，但实际上这里的匹配关系是相反的）。对于这种情况，只需在搜索时附带一个 "),t("code",[v._v("-x")]),v._v(" 即可。而此时的搜索结果也会显示完整的问题和回答（如果不使用正则匹配，由于你已经提供了完整的问题或回答，则不会重复显示）：")]),v._v(" "),t("panel-view",{attrs:{title:"聊天记录"}},[t("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[v._v("## 一时 -x")]),v._v(" "),t("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[v._v("问题正则表达式“一时”的搜索结果如下："),t("br"),v._v("1001. 正则：^(.+)一时爽$，回答：一直$1一直爽")])],1),v._v(" "),t("p",[v._v("另一种情况则是我们希望只显示那些非正则匹配到的结果。此时只需在搜索时附带一个 "),t("code",[v._v("-X")]),v._v(" 即可。我们来对比一下搜索结果：")]),v._v(" "),t("panel-view",{attrs:{title:"聊天记录"}},[t("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[v._v("## 挖坑一时爽")]),v._v(" "),t("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[v._v("问题“挖坑一时爽”的回答如下："),t("br"),v._v("1001. [正则] 一直$1一直爽")]),v._v(" "),t("chat-message",{attrs:{nickname:"Alice",color:"#cc0066"}},[v._v("## 挖坑一时爽 -X")]),v._v(" "),t("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[v._v("没有搜索到问题“挖坑一时爽”。")])],1)],1)}),[],!1,null,null,null);_.default=e.exports}}]);